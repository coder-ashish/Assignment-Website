define("@widget/MESSAGING/bs-Component-f9246098.js",["radpack","exports","@wsb/guac-widget-shared@^1/lib/components/Recaptcha/badge","@wsb/guac-widget-shared@^1/lib/common/constants/traffic2","@wsb/guac-widget-shared@^1/lib/common/constants/form/formIdentifiers"],(function(e,o,a,t,r){"use strict";var l=(global.keyMirror||guac.keymirror)({MESSAGING_FAB:null,MESSAGING_MESSAGE_FLYOUT:null,WELCOME_MESSAGE:null,SEND_MESSAGE_TO:null,EMAIL_OPT_IN_TOGGLE:null,EMAIL_OPT_IN_MESSAGE:null,COLOR_SATURATION_KNOB:null,COLOR_HUE_SLIDER_KNOB:null});const c=(global.React||guac.react).createElement("path",{d:"M0.342304 14.5C7.35025 6.3293 3.35025 0.829295 0 0.0.0 0.0 5.4 2.1 32.3502 0.329295C32.3503 3.8293 -3.13481 20.7261 0.342304 14.5Z"});function s({text:e}){return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{category:"neutral",section:"overlay",style:{backgroundColor:"neutral",margin:"-medium medium medium medium",borderRadius:"5px",position:"relative"}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,{style:{padding:"12px 15px",borderRadius:"5px",backgroundColor:"primaryOverlay",fontSize:"16px",color:"neutral"}},e),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Icon,{icon:c,size:24,style:{width:"33px",height:"16px",color:"primaryOverlay",position:"absolute",top:"100%",left:"3px",marginTop:"-1px"}}))}function n({title:e,message:o,children:a,onClose:t}){return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-aid":l.MESSAGING_MESSAGE_FLYOUT,style:{"-webkit-overflow-scrolling":"touch",overflowX:"hidden",overflowY:"auto",boxShadow:"0px 3px 18px rgba(0, 0, 0, 0.25)",backgroundColor:"neutral",borderRadius:"5px",borderWidth:"xsmall",borderStyle:"solid",borderColor:"#fff",width:"382px",marginBottom:"small",position:"absolute",maxHeight:"calc(100vh - 105px)",right:"-1px",bottom:"100%","@xs-only":{maxHeight:"100vh",height:"100vh",zIndex:"inherit",position:"fixed",left:"0",top:"0",bottom:"89px",width:"100%"}}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-field-id":"formEmail"},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Icon,{onClick:t,icon:"close",size:22,style:{color:"#fff",position:"absolute",top:"18px",right:"14px",cursor:"pointer","@sm":{display:"none"}}}),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading,{style:{color:"action",fontSize:"large",backgroundColor:"action",paddingTop:"small",paddingBottom:o?"xlarge":"small",paddingLeft:"medium",paddingRight:"medium",margin:o?"0":"0 0 medium 0",textAlign:"left","@md":{textAlign:"left"}}},e),o?(global.React||guac.react).createElement(s,{text:o}):null,(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:{overflow:"hidden",padding:"0 medium"}},a)))}s.propTypes={text:(global.PropTypes||guac["prop-types"]).string.isRequired},n.propTypes={title:(global.PropTypes||guac["prop-types"]).string.isRequired,message:(global.PropTypes||guac["prop-types"]).string.isRequired,children:(global.PropTypes||guac["prop-types"]).node.isRequired,onClose:(global.PropTypes||guac["prop-types"]).func.isRequired};const{renderModes:i}=(global.Core||guac["@wsb/guac-widget-core"]).constants,p="reamazejs-container";function g(e){const{position:o,prompt:a,promptEnabled:t,color:r,reamazeBrandId:l,reamazeWrap:c,reamazeJsSource:s,reamazeCookieJsSource:n,cookieBannerEnabled:g,confirmationMessage:u,avatar:d,forceShowFlyout:m,renderMode:b,isMobile:y}=e,[w,E]=(global.React||guac.react).useState(!0),[f,T]=(global.React||guac.react).useState(!0),h="reamaze-iframe"+(y?"-mobile":""),P="reamaze-iframe-wrapper"+(y?"-mobile":""),R=e=>{const o=e.createElement("script");return o.src=b!==i.EDIT&&b!==i.PREVIEW&&g?n:s,o.async=!0,o.type="text/javascript",o},S=e=>({mode:"notification",delay:b===i.EDIT?0:10,text:e}),I=()=>({account:l,openPopup:m,ui:{contactMode:"default",enableKb:"false",styles:{widgetColor:r},widget:{icon:"webChat",label:!(!t||b===i.EDIT)&&S(a),position:o},shoutboxFacesMode:"custom",overrides:{confirmationMessage:u}},user:{authpath:`/m/api/reamaze/v2/customers/auth?brand=${l}`},_preview:m}),C=()=>{const e=document.getElementById(h).contentWindow.document,o=e.getElementById("reamaze-widget"),a=e.createEvent("HTMLEvents");a.initEvent("click",!0,!1),o.dispatchEvent(a)},v=(e,o)=>{e.forEach((e=>{const a=e.addedNodes[0];if((null==a?void 0:a.id)===p){if(b===i.EDIT&&null!=c&&c.current)return c.current.append(a),void o.disconnect();if(b===i.PREVIEW)return a.remove(),void o.disconnect()}}))};return(global.React||guac.react).useEffect((()=>{if(b===i.EDIT||b===i.PREVIEW){const e={childList:!0};new MutationObserver(v).observe(document.body,e)}if(b===i.PREVIEW)(()=>{const e=document.createElement("iframe");e.id=h,e.src="about:blank",e.height="100%",e.width="100%",e.style.cssText="pointer-events:none; position:absolute; border:none;";const o=document.createElement("div");o.style.cssText="pointer-events:auto;",o.addEventListener("click",C);const a=document.createElement("div");a.id="fake-button",a.style.cssText="position:absolute; right: 0; bottom: 0; height: 60px; width: 60px",a.addEventListener("mouseenter",(()=>{a.style.cssText+="cursor:pointer"})),a.addEventListener("click",(e=>{const a=document.createEvent("HTMLEvents");a.initEvent("click",!0,!1),o.dispatchEvent(a),e.stopPropagation()}));const t=document.getElementById(P);t.appendChild(e),t.parentNode.insertBefore(a,t),e.addEventListener("load",(()=>{const a=e.contentDocument;e.contentWindow._support=I(),a.open(),a.close();const t=R(a);a.head.appendChild(t),a.body.appendChild(o)}))})();else{const e=R(document);document.body.appendChild(e),window._support=I()}return()=>{const e=document.querySelector(`script[src='${s}']`);e&&e.remove();const o=document.getElementById(p);o&&o.remove()}}),[]),(global.React||guac.react).useEffect((()=>{b===i.EDIT&&(window._support.ui.widget.position=o,window._support.ui.styles={widgetColor:r},window._support.ui.shoutboxFacesMode="custom",window._support.openPopup=m,window._support._preview=m,window._support._route=null,window._support.ui.widget.label=!1,void 0!==window.reamaze&&window.reamaze.reload())}),[o,r,d,m]),(global.React||guac.react).useEffect((()=>{b===i.EDIT&&(w?E(!1):(window._support.ui.widget.label=!(!t||!m)&&S(a),window._support.openPopup=!1,void 0!==window.reamaze&&window.reamaze.reload()))}),[a,t]),(global.React||guac.react).useEffect((()=>{b===i.EDIT&&(f?T(!1):(window._support._route="conversations:show",window._support._routeParams={slug:"*mock_confirm_convo*"},window._support.ui.overrides.confirmationMessage=u,window._support.openPopup=m,window._support._preview=m,void 0!==window.reamaze&&window.reamaze.reload()))}),[u]),(global.React||guac.react).createElement("div",null,b===i.PREVIEW&&(global.React||guac.react).createElement("div",{id:P,style:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",pointerEvents:"none"}}))}g.propTypes={position:(global.PropTypes||guac["prop-types"]).string,prompt:(global.PropTypes||guac["prop-types"]).string,promptEnabled:(global.PropTypes||guac["prop-types"]).bool,color:(global.PropTypes||guac["prop-types"]).string,reamazeBrandId:(global.PropTypes||guac["prop-types"]).string,reamazeJsSource:(global.PropTypes||guac["prop-types"]).string,reamazeCookieJsSource:(global.PropTypes||guac["prop-types"]).string,reamazeWrap:(global.PropTypes||guac["prop-types"]).node,confirmationMessage:(global.PropTypes||guac["prop-types"]).string,avatar:(global.PropTypes||guac["prop-types"]).string,forceShowFlyout:(global.PropTypes||guac["prop-types"]).bool,renderMode:(global.PropTypes||guac["prop-types"]).string,isMobile:(global.PropTypes||guac["prop-types"]).bool,cookieBannerEnabled:(global.PropTypes||guac["prop-types"]).bool};const u={contactApi:/[?&]contactApiVersion=([^&]*)/};function d(e="contactApi"){if("undefined"==typeof window)return"";const{location:{search:o=""}}=window||{},a=u[e].exec(o);return a&&a[1]?`${a[1]}.`:""}const m="EMAIL",b="CONVERSATIONS",{utils:{TCCLUtils:y}}=(global.Core||guac["@wsb/guac-widget-core"]).UX2,{MESSAGING_EMAIL:w,MESSAGING_CONVERSATIONS:E}=r.default,{Z_INDEX_COOKIE_BANNER:f,Z_INDEX_FULL_SCREEN_OVERLAY:T,Z_INDEX_STICKY_NAV:h}=(global.Core||guac["@wsb/guac-widget-core"]).constants.layers,P=({keyName:e})=>"phone"!==e,R=(global.React||guac.react).lazy((()=>new Promise((function(o,a){e.require(["@wsb/guac-widget-shared@^1/lib/components/Form"],o,a)})))),S={marginBottom:"medium",display:"block",textAlign:"center",color:"action"};function I(e){const{id:o,section:r,forceShowFlyout:c,welcomeMessage:s,config:i,formEmail:p,formFields:u,formSuccessMessage:I,emailOptInEnabled:C,emailOptInMessage:v,notificationPreference:_,recaptchaType:M,emailConfirmationMessage:x,locale:z,websiteId:k,accountId:A,domainName:N,staticContent:B,isReseller:O,businessName:L,reamazeBrandId:G,reamazePrompt:U,reamazePromptEnabled:X,reamazeThemeColor:F,reamazePosition:D,reamazeConfirmationMessage:W,reamazeAvatarImage:H,renderMode:q,cookieBannerEnabled:J}=e,V=(global.React||guac.react).useRef(!1),[j,Z]=(global.React||guac.react).useState(c),[K,Y]=(global.React||guac.react).useState(e.isMobile),$=q===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.PUBLISH,Q=()=>Z(!j);(global.React||guac.react).useEffect((()=>{var e;const o=null===(e=window.document)||void 0===e?void 0:e.body;o&&$&&(K&&j?o.classList.add("disable-scroll"):o.classList.remove("disable-scroll"))}),[j,K]),(global.React||guac.react).useEffect((()=>{j!==c&&Z(c)}),[c]),(global.React||guac.react).useEffect((()=>{V.current?Z(!0):V.current=!0}),[p,s,I,C,v]);const ee=_===m?u.filter(P):u,oe=_===m?w:E,ae=(global.React||guac.react).useRef(null);return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{category:"neutral",section:r,style:{position:"fixed",right:"medium",bottom:"medium",zIndex:j?T:f-1,width:"65px",height:"65px","@md":{zIndex:j?h+1:f-1}}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX.MatchMedia,{onChange:o=>{const a=$&&o?"xs"===o.size:e.isMobile;Y(a)}}),"REAMAZE"===_&&G&&(global.React||guac.react).createElement("div",{ref:ae},(global.React||guac.react).createElement(g,{position:D,prompt:U,promptEnabled:X,color:F,reamazeBrandId:G,reamazeWrap:ae,reamazeJsSource:i.reamazeJsSource,reamazeCookieJsSource:i.reamazeCookieJsSource,confirmationMessage:W,avatar:H,forceShowFlyout:c,cookieBannerEnabled:J,renderMode:q,isMobile:K})),[m,b].includes(_)&&(global.React||guac.react).createElement((global.React||guac.react).Fragment,null,j?(global.React||guac.react).createElement(n,{title:L,message:s,onClose:Q},"undefined"!=typeof window?(global.React||guac.react).createElement((global.React||guac.react).Suspense,{fallback:(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:S},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Loader,{size:"medium"}))},(global.React||guac.react).createElement(R,{locale:z,websiteId:k,accountId:A,domainName:N,staticContent:B,emailConfirmationMessage:x,emailOptInEnabled:C,emailOptInMessage:v,formSuccessMessage:I,formSubmitEndpoint:i.formSubmitEndpoint,formSubmitHost:i.formSubmitHost.replace("{{SHA}}",d()),formFields:ee,formIdentifier:oe,recaptchaType:M,recaptchaEnabled:Boolean(M),isReseller:O,category:"neutral",pageId:"00000000-0000-0000-0000-000000000000",widgetId:o,renderMode:q,dataAidPrefix:"MESSAGING"})):null):(global.React||guac.react).createElement(a.default,null),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-aid":l.MESSAGING_FAB,"data-field-id":K||c?null:"enabled","data-edit-interactive":"true",onClick:Q,"data-traffic2":j?t.default.editor_preview.messaging_fab_close:t.default.editor_preview.messaging_fab_open,"data-tccl":y.getTCCLString({eid:j?"ux2.messaging.fab.close":"ux2.messaging.fab.open",type:"click"}),style:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:j?"#555":"action",boxShadow:"0px 3px 18px rgba(0, 0, 0, 0.25)",transform:"translateZ(0)"}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Icon,{style:{color:j?"#fff":"action"},icon:j?"close":"chat",size:j?34:44}))))}I.propTypes={forceShowFlyout:(global.PropTypes||guac["prop-types"]).bool,businessName:(global.PropTypes||guac["prop-types"]).string,reamazeBrandId:(global.PropTypes||guac["prop-types"]).string,formEmail:(global.PropTypes||guac["prop-types"]).string,welcomeMessage:(global.PropTypes||guac["prop-types"]).string,formSuccessMessage:(global.PropTypes||guac["prop-types"]).string,emailOptInMessage:(global.PropTypes||guac["prop-types"]).string,emailOptInEnabled:(global.PropTypes||guac["prop-types"]).bool,section:(global.PropTypes||guac["prop-types"]).string,domainName:(global.PropTypes||guac["prop-types"]).string,cookieBannerEnabled:(global.PropTypes||guac["prop-types"]).bool,config:(global.PropTypes||guac["prop-types"]).shape({formSubmitEndpoint:(global.PropTypes||guac["prop-types"]).string,formSubmitHost:(global.PropTypes||guac["prop-types"]).string,reamazeJsSource:(global.PropTypes||guac["prop-types"]).string,reamazeCookieJsSource:(global.PropTypes||guac["prop-types"]).string}),formFields:(global.PropTypes||guac["prop-types"]).array,accountId:(global.PropTypes||guac["prop-types"]).string.isRequired,websiteId:(global.PropTypes||guac["prop-types"]).string.isRequired,id:(global.PropTypes||guac["prop-types"]).string,staticContent:(global.PropTypes||guac["prop-types"]).object.isRequired,locale:(global.PropTypes||guac["prop-types"]).string,emailConfirmationMessage:(global.PropTypes||guac["prop-types"]).string,recaptchaType:(global.PropTypes||guac["prop-types"]).string,isMobile:(global.PropTypes||guac["prop-types"]).bool,notificationPreference:(global.PropTypes||guac["prop-types"]).string,isReseller:(global.PropTypes||guac["prop-types"]).bool,reamazePrompt:(global.PropTypes||guac["prop-types"]).string,reamazePromptEnabled:(global.PropTypes||guac["prop-types"]).bool,reamazeThemeColor:(global.PropTypes||guac["prop-types"]).string,reamazePosition:(global.PropTypes||guac["prop-types"]).string,reamazeConfirmationMessage:(global.PropTypes||guac["prop-types"]).string,reamazeAvatarImage:(global.PropTypes||guac["prop-types"]).string,renderMode:(global.PropTypes||guac["prop-types"]).string},o.default=I,Object.defineProperty(o,"__esModule",{value:!0})})),"undefined"!=typeof window&&(window.global=window);
//# sourceMappingURL=bs-Component-f9246098.js.map
